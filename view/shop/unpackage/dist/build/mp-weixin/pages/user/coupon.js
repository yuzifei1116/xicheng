(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/coupon"],{"0cc9":function(e,t,o){"use strict";var n={"uni-load-more":()=>o.e("components/uni-load-more/uni-load-more").then(o.bind(null,"b4fc"))},i=function(){var e=this,t=e.$createElement;e._self._c},s=[];o.d(t,"b",function(){return i}),o.d(t,"c",function(){return s}),o.d(t,"a",function(){return n})},"1c24":function(e,t,o){"use strict";var n=o("85bf"),i=o.n(n);i.a},"2da7":function(e,t,o){"use strict";o.r(t);var n=o("7dee"),i=o.n(n);for(var s in n)"default"!==s&&function(e){o.d(t,e,function(){return n[e]})}(s);t["default"]=i.a},"7dee":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return o.e("components/uni-load-more/uni-load-more").then(o.bind(null,"b4fc"))},i={components:{uniLoadMore:n},data:function(){return{cateMaskState:0,headerPosition:"fixed",headerTop:"0px",loadingType:"more",filterIndex:0,cateId:0,priceOrder:0,cateList:[],goodsList:[],sid:0,salesOrder:"",source:0,addressList:[],scrollHeight:100,tabScrollTop:0,contentText:{contentdown:"上拉加载更多",contentrefresh:"加载中",contentnomore:"我是有底线的"},page:1,limit:20,status:"more",keyword:"",type:0,mer_id:0}},onLoad:function(e){console.log("页面",e),this.sid=e.sid,this.keyword=e.keyword,this.mer_id=e.mer_id,getApp().user_api(!0),this.calcSize()},onShow:function(){this.page=1,this.goodsList=[],this.getProductList()},onPageScroll:function(e){e.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},onPullDownRefresh:function(){console.log("refresh"),setTimeout(function(){e.stopPullDownRefresh()},1e3)},onReachBottom:function(){},methods:{getProductList:function(t){var o=this,n=o.type?o.type:"0";if(console.log("排序",n),"0"==n)var i="/gzh/coupons_api/get_issue_coupon_list",s=o.mer_id?o.mer_id:"",c={mer_id:s,page:o.page,limit:o.limit};else if(1==n)i="/gzh/coupons_api/get_use_coupons",c={types:0,page:o.page,limit:o.limit};getApp().http(i,c,function(t){console.log("详情",t),e.hideLoading();var n=t;n.length>0?(console.log("总条数",n.length),o.goodsList=o.goodsList.concat(n),o.status=n.length>=o.limit?"more":"","more"==o.status&&(o.page+=1)):o.status=""})},tabClick:function(t){var o=this;console.log("点击",t),o.filterIndex=t,this.priceOrder=2===t?1===this.priceOrder?2:1:0,e.showLoading({title:"正在加载"}),0==o.filterIndex?(console.log("优惠券"),o.page=1,o.goodsList=[],o.type=0,o.getProductList()):1==o.filterIndex&&(o.page=1,o.goodsList=[],o.type=1,o.getProductList(),console.log("我的"))},userCoupon:function(e){var t=e.id,o="/gzh/coupons_api/user_get_coupon",n={couponId:t};getApp().http(o,n,function(e){console.log("领取",e),200==e.code?getApp().showTip(e.msg,"success"):getApp().showTip(e.msg,"none")},!0)},scroAddr:function(){var e=this;e.status&&e.getProductList()},calcSize:function(){var t=this;e.getSystemInfo({success:function(o){e.createSelectorQuery().select(".content");t.scrollHeight=o.windowHeight-38}})}}};t.default=i}).call(this,o("543d")["default"])},"85bf":function(e,t,o){},acfe:function(e,t,o){"use strict";(function(e){o("3c4b"),o("921b");n(o("66fd"));var t=n(o("f35c"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},f35c:function(e,t,o){"use strict";o.r(t);var n=o("0cc9"),i=o("2da7");for(var s in i)"default"!==s&&function(e){o.d(t,e,function(){return i[e]})}(s);o("1c24");var c,r=o("f0c5"),u=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);t["default"]=u.exports}},[["acfe","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cart/cart"],{"0777":function(t,e,c){"use strict";var o,n=function(){var t=this,e=t.$createElement,c=(t._self._c,t.__map(t.cartList,function(e,c){var o=t.indexUrl(e.productInfo.image);return{$orig:t.__get_orig(e),m0:o}}));t.$mp.data=Object.assign({},{$root:{l0:c}})},r=[];c.d(e,"b",function(){return n}),c.d(e,"c",function(){return r}),c.d(e,"a",function(){return o})},"213c":function(t,e,c){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=c("2f62");function n(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{},o=Object.keys(c);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(c).filter(function(t){return Object.getOwnPropertyDescriptor(c,t).enumerable}))),o.forEach(function(e){r(t,e,c[e])})}return t}function r(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}var a=function(){return c.e("components/uni-number-box").then(c.bind(null,"e5e9"))},i=function(){return c.e("components/uni-load-more/uni-load-more").then(c.bind(null,"b4fc"))},l={components:{uniNumberBox:a,uniLoadMore:i},data:function(){return{total:0,allChecked:!1,empty:!1,cartList:[],cartListArr:[],num:1,selectValue:[],source:0,addressList:[],scrollHeight:100,tabScrollTop:0,contentText:{contentdown:"上拉加载更多",contentrefresh:"加载中",contentnomore:"我是有底线的"},page:1,limit:2,status:"more",clickdel:!0}},onLoad:function(){this.calcSize(),getApp().user_api(!0)},onShow:function(){this.selectValue=[],this.total=0,this.allChecked=!1,this.getCartList()},watch:{cartList:function(t){}},computed:n({},(0,o.mapState)(["hasLogin"])),methods:{getCartList:function(){var t=this,e="/gzh/auth_api/get_cart_list";getApp().http(e,{},function(e){t.cartList=e.valid,t.cartListArr=e.valid,console.log(e),console.log(t.cartList),console.log("============456465456")})},nav:function(e){t.navigateTo({url:"/pages/product/product?id="+e})},indexUrl:function(t){var e=t.indexOf("http");return-1==e?this.webUrl+"/"+t:t},onImageLoad:function(t,e){this.$set(this[t][e],"loaded","loaded")},onImageError:function(t,e){this[t][e].image="/static/errorImage.jpg"},navToLogin:function(){t.navigateTo({url:"/pages/public/login"})},check:function(t,e,c){var o=this;if(console.log(t,e,c),"item"===t)this.cartList=[],this.$nextTick(function(){o.cartList=o.cartListArr,o.cartList[e].checked=!o.cartList[e].checked;o.cartList[e].checked;var t=o.selectValue,c=o.cartList[e].id,n=t.indexOf(c);"-1"==n?(console.log("不存在"),t.push(c)):(console.log("存在 不添加",n),t.splice(n,1)),o.calcTotal()});else{var n=!this.allChecked,r=this.cartList;if(r.forEach(function(t){t.checked=n}),console.log("dddddddddddddd",this.allChecked),this.allChecked?this.clickdel=!0:this.clickdel=!1,console.log("全选选中",this.allChecked),this.allChecked)this.selectValue=[];else{this.selectValue=[];for(var a=0;a<this.cartList.length;a++){console.log("全选");var i=this.selectValue,l=this.cartList[a].id;i.indexOf(l);i.push(l)}}console.log("全选",this.selectValue),this.calcTotal()}},addNum:function(t,e){var c=this,o=c.cartList[t].productInfo,n=o.attrInfo?o.attrInfo.stock:o.stock;if(console.log(n),console.log("数量",t,e,c.cartList),e.cart_num>=n)console.log("不加");else{console.log("加");var r=c.cartList[t].id;c.cartList[t].cart_num=e.cart_num+1,c.clickNum(r,c.cartList[t].cart_num)}c.calcTotal()},reduceNum:function(t,e){var c=this;if(console.log(c.cartList[t].cart_num),console.log("啊啊啊啊",t,e),1==e.cart_num)console.log("不减");else{var o=c.cartList[t].id;c.cartList[t].cart_num=e.cart_num-1,c.clickNum(o,c.cartList[t].cart_num)}c.calcTotal()},clickNum:function(t,e){var c="/gzh/auth_api/change_cart_num",o={cartId:t,cartNum:e};getApp().http(c,o,function(t){console.log(t)})},deleteCartItem:function(e){var c=this,o=e.id;t.showModal({title:"删除",content:"确定删除商品吗",success:function(n){if(console.log("sssss"),1==n.confirm){var r="/gzh/auth_api/remove_cart",a={ids:o};getApp().http(r,a,function(t){200==t.code&&(getApp().showTip(t.msg,"success"),c.getCartList()),console.log(t)},!0),console.log("删除",e),c.calcTotal(),t.hideLoading()}}})},clearCart:function(){var e=this;t.showModal({content:"清空购物车？",success:function(t){t.confirm&&(e.cartList=[])}})},calcTotal:function(){var t=this,e=t.cartList,c=t.selectValue,o=0;if(console.log("选中",c.length),console.log("列表",e.length),c.length==e.length?t.allChecked=!0:t.allChecked=!1,c.length<1)t.total=0;else for(var n in e){var r=c.includes(e[n].id),a=e[n].productInfo.attrInfo?e[n].productInfo.attrInfo.price:e[n].productInfo.price;r&&(o=Number(o)+Number(e[n].cart_num)*Number(a),t.total=o)}},scroAddr:function(){var t=this;t.status&&t.getCartList()},calcSize:function(){var e=this;t.getSystemInfo({success:function(c){var o=t.createSelectorQuery().select(".container");e.scrollHeight=c.windowHeight-200,console.log(o),console.log(e.scrollHeight),console.log("高度高度高度高度高度高度",c)}})},createOrder:function(){var e=this,c=e.selectValue,o=c.toString();console.log("的风格的风格地方",o);""==c?getApp().showTip("您还没有选择要购买的商品","none"):t.navigateTo({url:"/pages/order/createOrder?cartId="+o})}}};e.default=l}).call(this,c("543d")["default"])},"317b":function(t,e,c){"use strict";var o=c("e57d"),n=c.n(o);n.a},"346d":function(t,e,c){"use strict";c.r(e);var o=c("0777"),n=c("63c2");for(var r in n)"default"!==r&&function(t){c.d(e,t,function(){return n[t]})}(r);c("317b");var a,i=c("f0c5"),l=Object(i["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=l.exports},"63c2":function(t,e,c){"use strict";c.r(e);var o=c("213c"),n=c.n(o);for(var r in o)"default"!==r&&function(t){c.d(e,t,function(){return o[t]})}(r);e["default"]=n.a},6527:function(t,e,c){"use strict";(function(t){c("3c4b"),c("921b");o(c("66fd"));var e=o(c("346d"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,c("543d")["createPage"])},e57d:function(t,e,c){}},[["6527","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/orderDetail"],{"2c43":function(o,e,n){},"48ed":function(o,e,n){"use strict";n.r(e);var t=n("f9f7"),i=n.n(t);for(var r in t)"default"!==r&&function(o){n.d(e,o,function(){return t[o]})}(r);e["default"]=i.a},8327:function(o,e,n){"use strict";var t=n("2c43"),i=n.n(t);i.a},a507:function(o,e,n){"use strict";(function(o){n("3c4b"),n("921b");t(n("66fd"));var e=t(n("e92d"));function t(o){return o&&o.__esModule?o:{default:o}}o(e.default)}).call(this,n("543d")["createPage"])},d94d:function(o,e,n){"use strict";var t,i=function(){var o=this,e=o.$createElement,n=(o._self._c,o.__map(o.people_list,function(e,n){var t=o.indexUrl(e.avatar);return{$orig:o.__get_orig(e),m0:t}})),t=o.__map(o.cartInfo.cartInfo,function(e,n){var t=o.indexUrl(e.productInfo.image);return{$orig:o.__get_orig(e),m1:t}});o.$mp.data=Object.assign({},{$root:{l0:n,l1:t}})},r=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"a",function(){return t})},e92d:function(o,e,n){"use strict";n.r(e);var t=n("d94d"),i=n("48ed");for(var r in i)"default"!==r&&function(o){n.d(e,o,function(){return i[o]})}(r);n("8327");var a,s=n("f0c5"),c=Object(s["a"])(i["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],a);e["default"]=c.exports},f9f7:function(o,e,n){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(n("9b5c"));function i(o){return o&&o.__esModule?o:{default:o}}var r=function(){return n.e("components/cmd-progress").then(n.bind(null,"d68c"))},a={components:{cmdProgress:r},data:function(){return{uni:"",cartInfo:[],userInfo:[],maskState:0,now_money:0,infoNum:0,people_list:[],isTime:0}},onLoad:function(o){console.log("啊啊啊啊",o),getApp().user_api(!0),this.uni=o.uni},onShow:function(){this.confirm_order()},methods:{confirm_order:function(){var e=this,n="/gzh/user_api/get_order",t={uni:e.uni};getApp().http(n,t,function(n){o.hideLoading(),e.cartInfo=n,e.userInfo=getApp().globalData.userInfo,e.now_money=getApp().globalData.userInfo.now_money,e.infoNum=100/e.cartInfo._pink_info.need_people*e.cartInfo._pink_info.has_people,e.people_list=n._pink_info.people_list;var t=n.cartInfo[0].productInfo.wk_start_time,i=new Date(t),r=Date.parse(i),a=r/1e3,s=n.cartInfo[0].productInfo.wk_stop_time,c=new Date(s),u=Date.parse(c),d=u/1e3,l=new Date,f=Date.parse(l),p=f/1e3;p<a?(console.log("未到尾款支付时间"),e.isTime=1):p>d?(e.isTime=3,console.log("尾款支付已过期")):(e.isTime=2,console.log("支付尾款")),console.log("结束时间",d,p)})},clickPay:function(e){o.showLoading({});var n=this;if(console.log(n.now_money<n.cartInfo.pay_price),console.log("水电费水电费",e,n.now_money,n.cartInfo.pay_price),"yue"==e&&n.now_money<n.cartInfo.pay_price)return getApp().showTip("余额不足","none"),!1;var t="/gzh/deal_api/pay_order",i={uni:n.cartInfo.order_id,paytype:e};getApp().http(t,i,function(e){if(console.log("支付",e),200==e.code)if(""==e.data)o.hideLoading(),getApp().showTip(e.msg,"none"),o.showLoading({}),n.confirm_order(),console.log("余额支付撒大声地");else{o.hideLoading();var t=e.data?e.data.result.jsConfig:"";console.log("创建订单返回2",t);var i="/gzh/auth_api/get_jsdk";o.request({url:n.webUrl+i,method:"GET",header:{"X-Requested-With":"XMLHttpRequest"},data:{url:btoa(window.location.href)},success:function(e){console.log("微信支付");var i=JSON.parse(e.data);console.log("微信支付11",i),mapleWx(i,function(){this.chooseWXPay(t,function(){console.log("执行着了么#####"),o.hideLoading(),getApp().showTip(e.msg,"none"),o.showLoading({}),n.confirm_order()},{fail:function(e){console.log("失败",e),o.showToast({title:"支付失败"}),window.history.back(-1)},cancel:function(){o.showToast({title:"您已取消支付"}),window.history.back(-1)},success:function(){console.log("成功过过"),window.history.back(-1)}})})}})}else getApp().showTip(e.msg,"none")},!0,"post")},orderpj:function(e){o.navigateTo({url:"/pages/order/orderEval?unique="+e})},ordert:function(e){console.log("支付",e),o.navigateTo({url:"/pages/order/orderT?uni="+e.order_id})},orderCon:function(){var e=this;o.showModal({title:"确认收货",content:"为保障权益，请收到货确认无误后，再确认收货",success:function(n){if(console.log("sssss"),1==n.confirm){var t="/gzh/user_api/user_take_order",i={uni:e.cartInfo.order_id};getApp().http(t,i,function(n){o.hideLoading(),200==n.code?(getApp().showTip(n.msg,"success"),e.confirm_order()):getApp().showTip(n.msg,"none")},!0)}}})},copy:function(){var e=this.cartInfo.delivery_id,n=(0,t.default)(e);!1===n?o.showToast({title:"不支持"}):o.showToast({title:"复制成功",icon:"none"})},goOrderConfirm:function(){var e=this,n="/gzh/user_api/get_order",t={uni:e.uni};getApp().http(n,t,function(e){var n=e.cart_id,t=n.toString();console.log(e,t),o.navigateTo({url:"/pages/order/createOrder?cartId="+e.cart_id})})},delOrder:function(){var e=this;o.showModal({title:"删除",content:"确定删除此订单吗？",success:function(n){if(console.log("sssss"),o.showLoading(),1==n.confirm){var t=e,i="/gzh/user_api/user_remove_order",r={uni:t.uni};getApp().http(i,r,function(e){o.hideLoading(),200==e.code?o.showToast({title:e.msg,duration:1500,success:function(){setTimeout(function(){o.navigateBack(3)},1500)}}):getApp().showTip(e.msg,"none")},!0)}}})},indexUrl:function(o){var e=o.indexOf("http");return-1==e?this.webUrl+"/"+o:o},toggleMask:function(o){var e=this,n="show"===o?10:300,t="show"===o?1:0;this.maskState=2,setTimeout(function(){e.maskState=t},n)}}};e.default=a}).call(this,n("543d")["default"])}},[["a507","common/runtime","common/vendor"]]]);